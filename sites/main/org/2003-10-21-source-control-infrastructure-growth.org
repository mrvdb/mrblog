#+SETUPFILE: "~/.outlet/etc/org-config.org"
#+BEGIN_HTML
---
layout: post
title: source control infrastructure growth
tags:
- revision control
- xaraya
status: publish
type: post
published: true
meta:
  status_net: 'yes'
  _stcr@_marcel@hsdev.com: '2012-01-12 10:54:43|Y'
  bitcointips_address: 15hZq9Ut7PuvaVukari48bkENxsPtXq8kR
---
#+END_HTML
<p>Using a script from Bryan O'Sullivans bitkeeper repository we integrated the bitkeeper repositories for Xaraya with our <a href="http://bugs.xaraya.com">bugzilla installation</a>. The script is used as a trigger everytime changes are committed to the main repositories on the server and scans the changeset comments for text fragments mentioning bugs.</p>
<p>When it finds those fragments, the following happens:</p>
<ul>
  <li>the change committed is attached as a patch to the bug; (this patch can in most cases be applied to source trees out there, while maintaining upgradeability)</li>

  <li>a comment is entered for the bug, summarizing what happened;</li>

  <li>links are created in the comment to view the path in the bitkeeper web interface;</li>

  <li>bugzilla mails the relevant parties as usual.</li>
</ul>
<p>This script is smart enough, not to enter the same information on the same bug and changeset twice which, if you know how bitkeeper works, is not uncommon if you have multiple repositories. As always, on deploying something new, you always start to think immediately about features which you could add (example: scanning for <em>fixed&amp;nbsp;</em> or <em>fix&amp;nbsp;</em> and setting the state of the bug accordingly).</p>
<p>During the period of&amp;nbsp; little over a year, we've built ourselves an infrastructure which is still growing and is literally improved upon everyday. Some elements of it:</p>
<ul>
  <li>automatic updates of mirror repositories;</li>

  <li>fully integrated patch system;</li>

  <li>custom command system, defining new commands in the repository which propagate to all developer repositories;</li>

  <li>funny stats output;</li>

  <li>getting information on RFC status;</li>

  <li>integrated build system based on <a href="http://phing.info">phing</a>;</li>

  <li>integrated source documentation generator based on phpdoc;</li>

  <li>repository web interface as module of xaraya;</li>

  <li>adding comments to files which propagate across repositories;</li>

  <li>integrated unit test system;</li>

  <li>semi-automatic archiving of old files in the repositories;</li>

  <li>possibility to test for compliance with coding standards on every commit automatically;</li>
</ul>
<p>With hindsight, a rather long list of tools, mainly created for fun. Some are used extensively, others are only used by myself.</p>
